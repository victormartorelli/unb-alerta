{% extends "base.html"%}
{% block content %}


<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src="/static/js/jquery.mask.min.js"></script>
<script type="text/javascript">


$(document).ready(function() {
  $("#data").mask("00/00/0000", {placeholder: "__/__/____"});
});

$(document).ready(function() {
  $("#data").datepicker({dateFormat:'dd/mm/yy'});
})


$(document).ready(function() {
  $("#hora").mask("00:00", {placeholder: "__:__"});
});
</script>

<div id = "fundo">
<div class="container">
    <div class="row vertical-offset-100">
    	
    	<nav class="navbar navbar-default">
		  <div class="container-fluid">
		    <div class="navbar-header">
		      <h1 class="navbar-brand">Filtragem:</h1>
		    </div>

		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      <form class="navbar-form navbar-left" role="search">
		        <div class="form-group">
		        	 <div class="form-group">
		              <label for="data" style="margin-left:10%" >Data</label>
		                  </br>
		                  <input id="data" name="data" style="width: 35%;" />
		            </div>
		            <div class="form-group">
		              <label for="hora" style="margin-left:-50%; margin-top:2%;">Horario
		              		</br>
		                  <input id="hora" name="hora" style="width: 25%;margin-top:2%" />
		            </div>
		            <div class="form-group">
		            	<label for="tb_categoria_ID" style="margin-left:-600%;margin-top:2%" >Tipo</label>
		                  </br>
		            </div>
		            <div class="form-group">
		            	<label for="emergencia" style="margin-left:-150%;margin-top:2%">Emergencia?</label>
		                  </br>
		            </div>
		            <div class="form-group">
		            	<label for="vitima" style="margin-left:-90%;margin-top:2%" >Ha vitima(s)?</label>
		                  </br>
		            </div>
		        </div>
		        <button type="submit" class="btn btn-primary" style="margin-left:0%">Filtrar</button>
		      </form>
		    </div>
		  </div>
		</nav>
      
        	<div class="panel panel-default">
        		<div class="panel-heading" style="background-color: #fefefe;
        		border-color: #caced1;"><h6> Todas as ocorrências</h6>
        		</div>
	        		<table class="table">

	        {% if vazio %}
	        	</br>
        		<div class="alert alert-dismissible alert-warning">
				  <strong style="margin-left:40%">Nao ha nenhuma ocorrencia!</strong>
				</div>
					{% else %}
						<tr>
							<th>Número</th>
							<th>Localização</th>
							<th>Data e Hora</th>
							<th>Imagem</th>
							<th>Emergência?</th>
							<th>Descrição</th>
						</tr>
					{% endif %}
        {% for o in object_list %}
				<tr>
					<td>{{o.id}}</td>
					<td><a href="http://maps.google.com/?q={{o.latitude}},{{o.longitude}}"> Clique para ver no mapa </a></td>
					<td>{{o.data}} - {{o.hora.hour}}:{{o.hora.minute}}</td>

								{% if o.foto %}
								  <td><a href="" id="abreImagem"> Clique para abrir a imagem</a>

								  <div id="myModal" class="modal"> 
			 						<span class="close">×</span>
			  						<img class="modal-content" src="{{o.foto.url}}" id="imagemOcorrencia">  						
			   					 	
			  					  </div>


			  					<script>
								
								var modal = document.getElementById('myModal');					
								var link = document.getElementById("abreImagem");
								
								var span = document.getElementsByClassName("close")[0];					


								link.onclick = function() {
								modal.style.display = "block";
								}

								
								span.onclick = function() {
								modal.style.display = "none";
								}

								window.onclick = function(event) {
								if (event.target == modal) {
								    modal.style.display = "none";
								}
								}
								</script>
				
			</div>
				
								  </td>
								{% else %}
								  <td> Não possui imagem </td>
								{% endif %}
								{% if o.emergencia == 1 %}
									<td><font color="red"> Sim </font></td>
								{% else %}
									<td> Não </td>
								{% endif %}
			                	<td><a class="btn btn-primary" href="{%  url 'ver_ocorrencia' o.id %}"  role="button">Ver Descrição</a></td>
			{% endfor %}
			    </tr>
					</table>
			   </div>
          </div>
   	        </div>
   	        {% include "pagination.html" %} 
       </div>
      </div>
    </div>
  </div>
</div>
<div>
 {% endblock %} 
