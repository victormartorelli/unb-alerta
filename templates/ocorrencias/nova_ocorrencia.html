{% extends "base.html"%}
{% block content %}
<script>
      
      function initMap() {
        var mapDiv = document.getElementById('map');
        
        //navigator.geolocation.getCurrentPosition(successo, erro);
        
        var map = new google.maps.Map(mapDiv, {
          center: {lat: -15.763606, lng: -47.869636},
          zoom: 17
        });
        google.maps.event.addListener(map, 'click', function(event) {
           posicionaMarcador(event.latLng);       
        });
        
        var marcador;
        function posicionaMarcador(posicao){
          document.getElementById("posicao").value = posicao;
          document.getElementById("resultado").innerHTML = posicao;
          
          if (marcador){
            marcador.setPosition(posicao);
          } else {          
            // Inserindo o marcador
            marcador = new google.maps.Marker({
              position: posicao,
              map: map,
              icon: {
                //path: google.maps.SymbolPath.CIRCLE,
                fillColor: 'red',
                fillOpacity: .2,
                strokeColor: 'white',
                strokeWeight: .5,
                scale: 10
              }
            });
          }  
        }
      }
      
    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?callback=initMap&libraries=geometry">
    </script>
<div id="map"></div>
  <div id = "fundo">
    <div class="container">
    <div class="row vertical-offset-100">
      <div class="col-md-6 col-md-offset-3">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3>Criar Ocorrência</h3>
          </div>
        </br>
        <form action="" method="POST">
            {% csrf_token %}
            <div class="form-group">
              <p>Tipo:</p>
                {{ form.tb_categoria_ID }}
            </div>
            <div class="form-group">
              <p>Data:</p>
                {{ form.data }}
            </div>
            <div class="form-group">
              <p>Hora:</p>
                {{ form.hora }}
            </div>
            <div class="form-group">
              <p>Emergencia?</p>
              {{ form.emergencia }}
            </div>
            <div class="form-group">
              Descrição: </br>{{ form.descricao }}
            </div>
            <div class="form-group">
              Validade: </br>{{ form.validade }}
            </div>
            <div class="form-group">
              Atendida: </br>{{ form.atendida }}
            </div>
            <div class="form-group">
              Vitimado: </br>{{ form.vitimado }}
            </div>
            <div class="form-group">
              ID USUARIO: </br>{{ form.usuario_ID }}
            </div>
            <div class="form-group">
              Latitude: </br>{{ form.latitude }}
            </div>
            <div class="form-group">
              Longitude: </br>{{ form.longitude }}
            </div>
            <div class="form-group">
              Vigilante ID: </br>{{ form.vigilante_ID }}
            </div>

<<<<<<< HEAD
        <input class="btn btn-lg btn-success btn-block" type="submit" value="Criar ocorrencia">
        </form>
=======
          <div class="panel-body">
            <form action="demo_form.asp" accept-charset="UTF-8" role="form">
                    <fieldset>
			   <div id="map"></div>
    <script>
      
      function initMap() {
        var mapDiv = document.getElementById('map');
        var map = new google.maps.Map(mapDiv, {
          center: {lat: -15.763606, lng: -47.869636},
          zoom: 17
        });
        google.maps.event.addListener(map, 'click', function(event) {
           posicionaMarcador(event.latLng);       
        });
        
        var marcador;
        function posicionaMarcador(posicao){
          document.getElementById("posicao").value = posicao;
          document.getElementById("resultado").innerHTML = posicao;
          
          if (marcador){
            marcador.setPosition(posicao);
          } else {          
            // Inserindo o marcador
            marcador = new google.maps.Marker({
              position: posicao,
              map: map,
              icon: {
                //path: google.maps.SymbolPath.CIRCLE,
                fillColor: 'red',
                fillOpacity: .2,
                strokeColor: 'white',
                strokeWeight: .5,
                scale: 10
              }
            });
          }  
        }
      }
      
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
        async defer></script>
        <form action="" method="post">
              <div class="form-group">
                <p>Tipo:</p>
                  {{ form.tb_categoria_id }}
              </div>
              <div class="form-group">
                <p>Emergencia?</p>
                {{ form.emergencia }}
              </div>
              <div class="form-group">
               Descrição: </br>{{ form.descricao }}
              </div>
              <div class="form-group">
			   <p>imagem:</p>
               <input type="file" name="imagem"/>
              </div>
              <input type="hidden" id="posicao" name="posicao" value="">
              <input class="btn btn-lg btn-success btn-block" type="submit" value="Criar ocorrencia">
              <div id="resultado"></div>
            </fieldset>
            
              </form>
          </div>
          <input type="submit" />
          </form>
          </div>
>>>>>>> c7c67cf60a6327975939861f0d78867317b9a8d8
        </div>
      </div>
      </div>
    </div>
  <div>
{% endblock %}
